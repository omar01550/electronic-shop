"use strict";var __awaiter=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};function handelRoutes(){let e=document.querySelectorAll(".routes li"),t=document.querySelectorAll(".sign-content div");e.forEach(((e,r)=>{e.addEventListener("click",(function(){t.forEach(((e,t)=>{e.classList.add("hidden")})),document.querySelector(e.dataset.target).classList.remove("hidden")}))}))}function handelActiveSection(){let e=document.querySelectorAll(".routes li");e.forEach(((t,r)=>{t.addEventListener("click",(function(){e.forEach(((e,t)=>{e.classList.remove("active-section")})),t.classList.add("active-section")}))}))}handelActiveSection(),handelRoutes();let registForm=document.querySelector(".register-form"),formUserName=document.querySelector(".register .register-user-name"),formPassword=document.querySelector(".register .register-password"),formEmail=document.querySelector(".register .register-email"),submitBtn=document.querySelector(".register-form .submit-btn");function doRedister(e,t,r){let o={userName:e.value,id:Math.floor(1e5*Math.random()),email:t.value,password:r.value,tokens:[]};fetch("https://omarapp-72ea1-default-rtdb.firebaseio.com/users.json").then((e=>e.json())).then((e=>{addUser(e,o),localStorage.login=!0,localStorage.electonicToken=e.indexOf(o),console.log("done")})).then((()=>{e.value="",t.value="",r.value="",window.location="index.html"}))}function formValidation(e,t,r){return!0}function userFound(e,t){return __awaiter(this,void 0,void 0,(function*(){let r,o=!1,n=yield fetch("https://omarapp-72ea1-default-rtdb.firebaseio.com/users.json"),a=yield n.json();for(let n=0;n<a.length;n++)a[n].email==e.value&&a[n].password==t.value&&(o=!0,r=a[n]);return o}))}function addUser(e,t){e.push(t),fetch("https://omarapp-72ea1-default-rtdb.firebaseio.com/users.json",{method:"PUT",body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{}))}registForm.addEventListener("submit",(function(e){e.preventDefault(),userFound(formEmail,formPassword).then((e=>{0==e?(doRedister(formUserName,formEmail,formPassword),localStorage.userName=formUserName.value):alert("the user is alerdy found")}))}));
